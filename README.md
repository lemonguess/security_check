# AIå†…å®¹å®¡æ ¸ç³»ç»Ÿ

## é¡¹ç›®æ¦‚è¿°

åŸºäºAgentScopeçš„æ™ºèƒ½å†…å®¹å®¡æ ¸å¹³å°ï¼Œé›†æˆç½‘æ˜“äº‘ç›¾å’Œé˜¿é‡Œäº‘ç›¾åŒå¼•æ“ï¼Œæä¾›å¤šåª’ä½“å†…å®¹å®‰å…¨æ£€æµ‹æœåŠ¡ã€‚ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å¤šç§å†…å®¹ç±»å‹çš„æ™ºèƒ½å®¡æ ¸ï¼Œå¯è¯†åˆ«æš´åŠ›ã€è‰²æƒ…ã€æ•æ„Ÿä¿¡æ¯ç­‰è¿è§„å†…å®¹ã€‚

![image-20250706225951185](https://lemon-guess.oss-cn-hangzhou.aliyuncs.com/img/image-20250706225951185.png)

![image-20250706230028759](https://lemon-guess.oss-cn-hangzhou.aliyuncs.com/img/image-20250706230028759.png)

![image-20250706230232973](https://lemon-guess.oss-cn-hangzhou.aliyuncs.com/img/image-20250706230232973.png)

## æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

- **Webæ¡†æ¶**: FastAPI (å¼‚æ­¥é«˜æ€§èƒ½)
- **æ•°æ®åº“**: SQLite + Peewee ORM
- **AIæ¡†æ¶**: AgentScope (æ™ºèƒ½ä»£ç†)
- **å†…å®¹æ£€æµ‹**: ç½‘æ˜“äº‘ç›¾ + é˜¿é‡Œäº‘ç›¾
- **ä»»åŠ¡è°ƒåº¦**: å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—
- **æœåŠ¡ç«¯å£**: 6188

### å‰ç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **å¼€å‘ç«¯å£**: 5173
- **UIç»„ä»¶**: è‡ªå®šä¹‰ç»„ä»¶åº“

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ” å¤šåª’ä½“å†…å®¹æ£€æµ‹

- **æ–‡æœ¬å®¡æ ¸**: æ•æ„Ÿè¯è¿‡æ»¤ã€æ”¿æ²»æ•æ„Ÿå†…å®¹æ£€æµ‹
- **å›¾ç‰‡å®¡æ ¸**: è‰²æƒ…ã€æš´åŠ›ã€å¹¿å‘Šç­‰è¿è§„å›¾ç‰‡è¯†åˆ«
- **éŸ³é¢‘å®¡æ ¸**: è¯­éŸ³å†…å®¹åˆè§„æ€§æ£€æµ‹
- **è§†é¢‘å®¡æ ¸**: è§†é¢‘ç”»é¢å’ŒéŸ³è½¨åŒé‡æ£€æµ‹

### ğŸ¤– æ™ºèƒ½å®¡æ ¸å¼•æ“

- **è§„åˆ™å¼•æ“**: åŸºäºæ•æ„Ÿè¯åº“å’Œæ­£åˆ™è¡¨è¾¾å¼
- **AIä»£ç†**: AgentScopeæ™ºèƒ½å®¡æ ¸ä»£ç†
- **èåˆå¼•æ“**: å¤šå¼•æ“ç»“æœèåˆå†³ç­–
- **å®æ—¶ç»Ÿè®¡**: å®¡æ ¸é‡ã€æˆåŠŸç‡ã€å¤„ç†æ—¶é—´ç»Ÿè®¡

### ğŸ“Š æ•°æ®çˆ¬å–ä¸ç›‘æ§

- **å¤šæºçˆ¬å–**: ä¼ä¸šåŠ¨æ€ã€è¡Œä¸šèµ„è®¯ã€åª’ä½“æŠ¥é“
- **å®æ—¶ç›‘æ§**: å½“å‰æ”¿æ²»æ–°é—»ç›‘æ§
- **è‡ªåŠ¨å®¡æ ¸**: çˆ¬å–å†…å®¹è‡ªåŠ¨è¿›å…¥å®¡æ ¸æµç¨‹

### ğŸ“ˆ ç»Ÿè®¡åˆ†æ

- **å®¡æ ¸ç»Ÿè®¡**: æ€»å®¡æ ¸é‡ã€æˆåŠŸç‡åˆ†æ
- **æ€§èƒ½ç›‘æ§**: å¹³å‡å¤„ç†æ—¶é—´ã€ä»Šæ—¥å®¡æ ¸é‡
- **å†å²æ•°æ®**: å®¡æ ¸å†å²è®°å½•å’Œè¶‹åŠ¿åˆ†æ

## é¡¹ç›®ç»“æ„

```
security_check/
â”œâ”€â”€ apps/                    # åº”ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ checks.py           # æ£€æµ‹æ¥å£
â”‚   â”œâ”€â”€ content.py          # å†…å®¹ç®¡ç†
â”‚   â”œâ”€â”€ moderation.py       # å®¡æ ¸é€»è¾‘
â”‚   â””â”€â”€ scraper.py          # çˆ¬è™«æ¥å£
â”œâ”€â”€ engines/                 # å®¡æ ¸å¼•æ“
â”‚   â”œâ”€â”€ base_engine.py      # åŸºç¡€å¼•æ“
â”‚   â”œâ”€â”€ fusion_engine.py    # èåˆå¼•æ“
â”‚   â””â”€â”€ rule_engine.py      # è§„åˆ™å¼•æ“
â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ database.py         # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ enums.py           # æšä¸¾å®šä¹‰
â”‚   â””â”€â”€ models.py          # ä¸šåŠ¡æ¨¡å‹
â”œâ”€â”€ services/               # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ agents/            # AIä»£ç†
â”‚   â”œâ”€â”€ aliyunsdk/         # é˜¿é‡Œäº‘SDK
â”‚   â”œâ”€â”€ wangyiyunsdk/      # ç½‘æ˜“äº‘SDK
â”‚   â”œâ”€â”€ spiders/           # çˆ¬è™«æœåŠ¡
â”‚   â””â”€â”€ moderation_service.py # å®¡æ ¸æœåŠ¡
â”œâ”€â”€ utils/                  # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ logger.py          # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ metrics.py         # æŒ‡æ ‡æ”¶é›†
â”œâ”€â”€ vue-security-check/     # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # Vueç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ types/         # TypeScriptç±»å‹
â”‚   â”‚   â””â”€â”€ App.vue        # ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ package.json       # å‰ç«¯ä¾èµ–
â”‚   â””â”€â”€ vite.config.ts     # Viteé…ç½®
â”œâ”€â”€ static/                 # é™æ€æ–‡ä»¶
â”œâ”€â”€ main.py                 # åº”ç”¨å…¥å£
â””â”€â”€ requirements.txt        # Pythonä¾èµ–
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Node.js 16+
- SQLite 3

### åç«¯éƒ¨ç½²

1. **å…‹éš†é¡¹ç›®**

   ```bash
   git clone <repository-url>
   cd security_check
   ```

2. **å®‰è£…Pythonä¾èµ–**

   ```bash
   # æ¨èä½¿ç”¨uvå·¥å…·
   uv sync
   ```

3. **é…ç½®ç¯å¢ƒ**

   ```bash
   # å¤åˆ¶é…ç½®æ–‡ä»¶
   cp config/conf.ini.example config/conf.ini
   # ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥APIå¯†é’¥ç­‰ä¿¡æ¯
   ```

4. **åˆå§‹åŒ–æ•°æ®åº“**

   ```bash
   python models/database.py
   ```

5. **å¯åŠ¨åç«¯æœåŠ¡**

   ```bash
   python main.py
   # æœåŠ¡å°†åœ¨ http://localhost:6188 å¯åŠ¨
   ```

### å‰ç«¯éƒ¨ç½²

1. **è¿›å…¥å‰ç«¯ç›®å½•**

   ```bash
   cd vue-security-check
   ```

2. **å®‰è£…ä¾èµ–**

   ```bash
   npm install
   # æˆ–ä½¿ç”¨yarn
   yarn install
   ```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

   ```bash
   npm run dev
   # å‰ç«¯å°†åœ¨ http://localhost:5173 å¯åŠ¨
   ```

4. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**

   ```bash
   npm run build
   ```

## APIæ¥å£

### å†…å®¹æ£€æµ‹æ¥å£

- `POST /api/v1/check/image` - å›¾ç‰‡æ£€æµ‹
- `POST /api/v1/check/audio` - éŸ³é¢‘æ£€æµ‹
- `POST /api/v1/check/video` - è§†é¢‘æ£€æµ‹
- `POST /api/v1/check/text` - æ–‡æœ¬æ£€æµ‹

### å®¡æ ¸ç®¡ç†æ¥å£

- `GET /api/v1/moderation/stats` - å®¡æ ¸ç»Ÿè®¡
- `POST /api/v1/moderation/process` - å¤„ç†å®¡æ ¸
- `GET /api/v1/moderation/history` - å®¡æ ¸å†å²

### å†…å®¹ç®¡ç†æ¥å£

- `GET /api/v1/content/list` - å†…å®¹åˆ—è¡¨
- `GET /api/v1/content/{id}` - å†…å®¹è¯¦æƒ…
- `PUT /api/v1/content/{id}/status` - æ›´æ–°çŠ¶æ€

### çˆ¬è™«æ¥å£

- `POST /api/v1/scrape/start` - å¯åŠ¨çˆ¬å–
- `GET /api/v1/scrape/status` - çˆ¬å–çŠ¶æ€

### ç³»ç»Ÿæ¥å£

- `GET /api/v1/health` - å¥åº·æ£€æŸ¥
- `GET /api/v1/stats` - ç³»ç»Ÿç»Ÿè®¡

## æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### Contentsè¡¨ - å†…å®¹ä¿¡æ¯

| å­—æ®µ               | ç±»å‹     | è¯´æ˜         |
| ------------------ | -------- | ------------ |
| id                 | UUID     | å†…å®¹å”¯ä¸€æ ‡è¯† |
| content_type       | VARCHAR  | å†…å®¹ç±»å‹     |
| content_url        | TEXT     | å†…å®¹URL      |
| audit_status       | VARCHAR  | å®¡æ ¸çŠ¶æ€     |
| processing_content | TEXT     | å¤„ç†ç»“æœ     |
| created_at         | DATETIME | åˆ›å»ºæ—¶é—´     |
| updated_at         | DATETIME | æ›´æ–°æ—¶é—´     |

#### AuditStatsè¡¨ - å®¡æ ¸ç»Ÿè®¡

| å­—æ®µ                  | ç±»å‹    | è¯´æ˜       |
| --------------------- | ------- | ---------- |
| id                    | INTEGER | ä¸»é”®       |
| date                  | DATE    | ç»Ÿè®¡æ—¥æœŸ   |
| total_audits          | INTEGER | æ€»å®¡æ ¸é‡   |
| successful_audits     | INTEGER | æˆåŠŸå®¡æ ¸é‡ |
| failed_audits         | INTEGER | å¤±è´¥å®¡æ ¸é‡ |
| total_processing_time | FLOAT   | æ€»å¤„ç†æ—¶é—´ |

### æšä¸¾å®šä¹‰

#### å®¡æ ¸çŠ¶æ€ (AuditStatus)

- `PENDING` - å¾…å®¡æ ¸
- `REVIEWING` - å®¡æ ¸ä¸­
- `APPROVED` - å®¡æ ¸é€šè¿‡
- `REJECTED` - å®¡æ ¸æ‹’ç»

#### å†…å®¹ç±»å‹ (ContentType)

- `TEXT` - æ–‡æœ¬
- `IMAGE` - å›¾ç‰‡
- `AUDIO` - éŸ³é¢‘
- `VIDEO` - è§†é¢‘

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL=sqlite:///security_check.db

# APIé…ç½®
API_HOST=0.0.0.0
API_PORT=6188

# äº‘å¹³å°é…ç½®
PLATFORM=wangyi  # wangyi | aliyun
WANGYI_SECRET_ID=your_secret_id
WANGYI_SECRET_KEY=your_secret_key
ALIYUN_ACCESS_KEY=your_access_key
ALIYUN_SECRET_KEY=your_secret_key
```

### é…ç½®æ–‡ä»¶ (config/conf.ini)

```ini
[database]
url = sqlite:///security_check.db

[api]
host = 0.0.0.0
port = 6188

[wangyi]
secret_id = your_secret_id
secret_key = your_secret_key

[aliyun]
access_key = your_access_key
secret_key = your_secret_key
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æ£€æµ‹å¼•æ“

1. åœ¨ `engines/` ç›®å½•ä¸‹åˆ›å»ºæ–°å¼•æ“ç±»
2. ç»§æ‰¿ `BaseEngine` åŸºç±»
3. å®ç° `detect()` æ–¹æ³•
4. åœ¨ `fusion_engine.py` ä¸­æ³¨å†Œæ–°å¼•æ“

### æ·»åŠ æ–°çš„çˆ¬è™«

1. åœ¨ `services/spiders/` ç›®å½•ä¸‹åˆ›å»ºçˆ¬è™«ç±»
2. ç»§æ‰¿ `Spider` åŸºç±»
3. å®ç° `crawl()` æ–¹æ³•
4. åœ¨çˆ¬è™«æœåŠ¡ä¸­æ³¨å†Œ

### å‰ç«¯ç»„ä»¶å¼€å‘

1. åœ¨ `vue-security-check/src/components/` ä¸‹åˆ›å»ºç»„ä»¶
2. ä½¿ç”¨TypeScriptç¼–å†™ç±»å‹å®‰å…¨çš„ä»£ç 
3. éµå¾ªVue 3 Composition APIè§„èŒƒ

## è®¸å¯è¯

MIT License

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request